{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/keys\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _defineProperty = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/define-property\"));\n\n(0, _defineProperty.default)(exports, \"__esModule\", {\n  value: true\n});\n\nconst url_1 = require(\"url\");\n/**\n * Utils\n */\n\n\nfunction execOnce(fn) {\n  var _this = this;\n\n  let used = false;\n  return function () {\n    if (!used) {\n      used = true;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      fn.apply(_this, args);\n    }\n  };\n}\n\nexports.execOnce = execOnce;\n\nfunction getLocationOrigin() {\n  const _window$location = window.location,\n        protocol = _window$location.protocol,\n        hostname = _window$location.hostname,\n        port = _window$location.port;\n  return \"\".concat(protocol, \"//\").concat(hostname).concat(port ? ':' + port : '');\n}\n\nexports.getLocationOrigin = getLocationOrigin;\n\nfunction getURL() {\n  const href = window.location.href;\n  const origin = getLocationOrigin();\n  return href.substring(origin.length);\n}\n\nexports.getURL = getURL;\n\nfunction getDisplayName(Component) {\n  return typeof Component === 'string' ? Component : Component.displayName || Component.name || 'Unknown';\n}\n\nexports.getDisplayName = getDisplayName;\n\nfunction isResSent(res) {\n  return res.finished || res.headersSent;\n}\n\nexports.isResSent = isResSent;\n\nfunction loadGetInitialProps(_x, _x2) {\n  return _loadGetInitialProps.apply(this, arguments);\n}\n\nfunction _loadGetInitialProps() {\n  _loadGetInitialProps = (0, _asyncToGenerator2.default)(function* (Component, ctx) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (Component.prototype && Component.prototype.getInitialProps) {\n        const message = \"\\\"\".concat(getDisplayName(Component), \".getInitialProps()\\\" is defined as an instance method - visit https://err.sh/zeit/next.js/get-initial-props-as-an-instance-method for more information.\");\n        throw new Error(message);\n      }\n    } // when called from _app `ctx` is nested in `ctx`\n\n\n    const res = ctx.res || ctx.ctx && ctx.ctx.res;\n\n    if (!Component.getInitialProps) {\n      return {};\n    }\n\n    const props = yield Component.getInitialProps(ctx);\n\n    if (res && isResSent(res)) {\n      return props;\n    } // if page component doesn't have getInitialProps\n    // set cache-control header to stale-while-revalidate\n\n\n    if (ctx.Component && !ctx.Component.getInitialProps) {\n      const customAppGetInitialProps = Component.origGetInitialProps && Component.origGetInitialProps !== Component.getInitialProps;\n\n      if (!customAppGetInitialProps && res && res.setHeader) {\n        res.setHeader('Cache-Control', 's-maxage=86400, stale-while-revalidate');\n      }\n    }\n\n    if (!props) {\n      const message = \"\\\"\".concat(getDisplayName(Component), \".getInitialProps()\\\" should resolve to an object. But found \\\"\").concat(props, \"\\\" instead.\");\n      throw new Error(message);\n    }\n\n    return props;\n  });\n  return _loadGetInitialProps.apply(this, arguments);\n}\n\nexports.loadGetInitialProps = loadGetInitialProps;\nexports.urlObjectKeys = ['auth', 'hash', 'host', 'hostname', 'href', 'path', 'pathname', 'port', 'protocol', 'query', 'search', 'slashes'];\n\nfunction formatWithValidation(url, options) {\n  if (process.env.NODE_ENV === 'development') {\n    if (url !== null && typeof url === 'object') {\n      (0, _keys.default)(url).forEach(key => {\n        if (exports.urlObjectKeys.indexOf(key) === -1) {\n          console.warn(\"Unknown key passed via urlObject into url.format: \".concat(key));\n        }\n      });\n    }\n  }\n\n  return url_1.format(url, options);\n}\n\nexports.formatWithValidation = formatWithValidation;","map":{"version":3,"sources":["/home/arma/My/Software/Projects/Story_SSR_Custom/node_modules/next-server/dist/lib/utils.js"],"names":["exports","value","url_1","require","execOnce","fn","used","args","apply","getLocationOrigin","window","location","protocol","hostname","port","getURL","href","origin","substring","length","getDisplayName","Component","displayName","name","isResSent","res","finished","headersSent","loadGetInitialProps","ctx","process","env","NODE_ENV","prototype","getInitialProps","message","Error","props","customAppGetInitialProps","origGetInitialProps","setHeader","urlObjectKeys","formatWithValidation","url","options","forEach","key","indexOf","console","warn","format"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst url_1 = require(\"url\");\n/**\n * Utils\n */\nfunction execOnce(fn) {\n    let used = false;\n    return (...args) => {\n        if (!used) {\n            used = true;\n            fn.apply(this, args);\n        }\n    };\n}\nexports.execOnce = execOnce;\nfunction getLocationOrigin() {\n    const { protocol, hostname, port } = window.location;\n    return `${protocol}//${hostname}${port ? ':' + port : ''}`;\n}\nexports.getLocationOrigin = getLocationOrigin;\nfunction getURL() {\n    const { href } = window.location;\n    const origin = getLocationOrigin();\n    return href.substring(origin.length);\n}\nexports.getURL = getURL;\nfunction getDisplayName(Component) {\n    return typeof Component === 'string'\n        ? Component\n        : Component.displayName || Component.name || 'Unknown';\n}\nexports.getDisplayName = getDisplayName;\nfunction isResSent(res) {\n    return res.finished || res.headersSent;\n}\nexports.isResSent = isResSent;\nasync function loadGetInitialProps(Component, ctx) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (Component.prototype && Component.prototype.getInitialProps) {\n            const message = `\"${getDisplayName(Component)}.getInitialProps()\" is defined as an instance method - visit https://err.sh/zeit/next.js/get-initial-props-as-an-instance-method for more information.`;\n            throw new Error(message);\n        }\n    }\n    // when called from _app `ctx` is nested in `ctx`\n    const res = ctx.res || (ctx.ctx && ctx.ctx.res);\n    if (!Component.getInitialProps) {\n        return {};\n    }\n    const props = await Component.getInitialProps(ctx);\n    if (res && isResSent(res)) {\n        return props;\n    }\n    // if page component doesn't have getInitialProps\n    // set cache-control header to stale-while-revalidate\n    if (ctx.Component && !ctx.Component.getInitialProps) {\n        const customAppGetInitialProps = Component.origGetInitialProps &&\n            Component.origGetInitialProps !== Component.getInitialProps;\n        if (!customAppGetInitialProps && res && res.setHeader) {\n            res.setHeader('Cache-Control', 's-maxage=86400, stale-while-revalidate');\n        }\n    }\n    if (!props) {\n        const message = `\"${getDisplayName(Component)}.getInitialProps()\" should resolve to an object. But found \"${props}\" instead.`;\n        throw new Error(message);\n    }\n    return props;\n}\nexports.loadGetInitialProps = loadGetInitialProps;\nexports.urlObjectKeys = [\n    'auth',\n    'hash',\n    'host',\n    'hostname',\n    'href',\n    'path',\n    'pathname',\n    'port',\n    'protocol',\n    'query',\n    'search',\n    'slashes',\n];\nfunction formatWithValidation(url, options) {\n    if (process.env.NODE_ENV === 'development') {\n        if (url !== null && typeof url === 'object') {\n            Object.keys(url).forEach(key => {\n                if (exports.urlObjectKeys.indexOf(key) === -1) {\n                    console.warn(`Unknown key passed via urlObject into url.format: ${key}`);\n                }\n            });\n        }\n    }\n    return url_1.format(url, options);\n}\nexports.formatWithValidation = formatWithValidation;\n"]},"metadata":{},"sourceType":"script"}