{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/json/stringify\"));\n\nconst fs = require(\"fs\");\n\nconst CheckAccessName = require(\"./checkAccessName\");\n\nconst handleError = (err, res) => {\n  res.writeHead(404, {\n    \"Content-Type\": \"application/json\"\n  });\n  res.end((0, _stringify.default)({\n    message: err.message,\n    status: 404\n  }));\n};\n\nvar _default = (req, res) => {\n  const pathname = CheckAccessName(req);\n  const path = \"pages\".concat(pathname, \".json\");\n  fs.access(path, fs.F_OK, err => {\n    if (err) return handleError(err, res);\n    return fs.readFile(path, (err, data) => {\n      if (err) return handleError(err, res);\n      res.writeHead(200, {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      });\n      return res.end(data.toString());\n    });\n  });\n};\n\nexports.default = _default;","map":{"version":3,"sources":["/home/arma/My/Software/Projects/Story_SSR_Custom/pages/api/category.js"],"names":["fs","require","CheckAccessName","handleError","err","res","writeHead","end","message","status","req","pathname","path","access","F_OK","readFile","data","toString"],"mappings":";;;;;;;;;;;;;;AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,eAAe,GAAGD,OAAO,qBAA/B;;AAEA,MAAME,WAAW,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AACjCA,EAAAA,GAAG,CAACC,SAAJ,CAAc,GAAd,EAAmB;AAAE,oBAAgB;AAAlB,GAAnB;AACAD,EAAAA,GAAG,CAACE,GAAJ,CACC,wBAAe;AACdC,IAAAA,OAAO,EAAEJ,GAAG,CAACI,OADC;AAEdC,IAAAA,MAAM,EAAE;AAFM,GAAf,CADD;AAMA,CARD;;eAUe,CAACC,GAAD,EAAML,GAAN,KAAc;AAC5B,QAAMM,QAAQ,GAAGT,eAAe,CAACQ,GAAD,CAAhC;AACA,QAAME,IAAI,kBAAWD,QAAX,UAAV;AACAX,EAAAA,EAAE,CAACa,MAAH,CAAUD,IAAV,EAAgBZ,EAAE,CAACc,IAAnB,EAAyBV,GAAG,IAAI;AAC/B,QAAIA,GAAJ,EAAS,OAAOD,WAAW,CAACC,GAAD,EAAMC,GAAN,CAAlB;AACT,WAAOL,EAAE,CAACe,QAAH,CAAYH,IAAZ,EAAkB,CAACR,GAAD,EAAMY,IAAN,KAAe;AACvC,UAAIZ,GAAJ,EAAS,OAAOD,WAAW,CAACC,GAAD,EAAMC,GAAN,CAAlB;AACTA,MAAAA,GAAG,CAACC,SAAJ,CAAc,GAAd,EAAmB;AAAE,wBAAgB;AAAlB,OAAnB;AACA,aAAOD,GAAG,CAACE,GAAJ,CAAQS,IAAI,CAACC,QAAL,EAAR,CAAP;AACA,KAJM,CAAP;AAKA,GAPD;AAQA,C","sourcesContent":["const fs = require(\"fs\");\nconst CheckAccessName = require(\"./checkAccessName\");\n\nconst handleError = (err, res) => {\n\tres.writeHead(404, { \"Content-Type\": \"application/json\" });\n\tres.end(\n\t\tJSON.stringify({\n\t\t\tmessage: err.message,\n\t\t\tstatus: 404\n\t\t})\n\t);\n};\n\nexport default (req, res) => {\n\tconst pathname = CheckAccessName(req);\n\tconst path = `pages${pathname}.json`;\n\tfs.access(path, fs.F_OK, err => {\n\t\tif (err) return handleError(err, res);\n\t\treturn fs.readFile(path, (err, data) => {\n\t\t\tif (err) return handleError(err, res);\n\t\t\tres.writeHead(200, { \"Content-Type\": \"application/json; charset=utf-8\" });\n\t\t\treturn res.end(data.toString());\n\t\t});\n\t});\n};\n"]},"metadata":{},"sourceType":"script"}